@page
@model Projeto_RazorPage_Padaria.Pages.Products.DeleteModel

@{
	ViewData["Title"] = "Delete";
}
<div class="container bg-dark w-50 mx-auto text-light">
	<h1>Delete</h1>

	<h6>Are you sure you want to delete this Product?</h6>
	<div class="col-10">
		<hr />
		<dl class="row">
			<dt class="col-sm-2">
				@Html.DisplayNameFor(model => model.Product.Description)
			</dt>
			<dd class="col-sm-10">
				@Html.DisplayFor(model => model.Product.Description)
			</dd>
			<dt class="col-sm-2">
				@Html.DisplayNameFor(model => model.Product.Price)
			</dt>
			<dd class="col-sm-10">
				@Html.DisplayFor(model => model.Product.Price)
			</dd>
		</dl>
		<form method="post" id="form-submit" class="form-group d-flex gap-3 mt-4">
			<div class="form-group d-flex gap-3 mt-4 w-50">
				<input type="hidden" asp-for="Product.Id" />
				<a asp-page="./Index" class="btn btn-secondary" style="width: 50%;">Back to List</a>
				<input type="submit" value="Delete" class="btn btn-danger" style="width: 50%;" />
			</div>
		</form>
	</div>
</div>

<script>
	const deleteForm = document.getElementById("form-submit")
	deleteForm.addEventListener("submit", (e)=>{
		e.preventDefault();
		if ('@Model.Product.IsProductTied.ToString()' == 'True') {
			const notyf = new Notyf();
			notyf.error("Product is tied to a sale, and it cannot be deleted")
		}else{
			deleteForm.submit()
		}
	})
</script>
